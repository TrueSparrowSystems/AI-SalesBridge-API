[
  {
    "description": "Should successfully create the note", 
    "input": {
      "body": {
        "text": "Test note"
      },
      "accountId": "0011e00000bWSxdAAG"
    },
    "mocks": {
      "makeCompositeRequest": {
        "compositeResponse": [
          {
            "body": {
              "id": "0691e000001WaSzAAK",
              "success": true,
              "errors": []
            },
            "httpHeaders": {
              "Location": "/services/data/v58.0/sobjects/ContentNote/0691e000001WaSzAAK"
            },
            "httpStatusCode": 201,
            "referenceId": "createNote"
          },
          {
            "body": {
              "id": "06A1e000002iD9mEAE",
              "success": true,
              "errors": []
            },
            "httpHeaders": {
              "Location": "/services/data/v58.0/sobjects/ContentDocumentLink/06A1e000002iD9mEAE"
            },
            "httpStatusCode": 201,
            "referenceId": "attachNote"
          }
        ]
      }
    },
    "output": {
      "note_id": "0691e000001WaSzAAK"
    }
  },
  {
    "description": "Should fail when the note text is empty", 
    "input": {
      "body": {
        "text": ""
      },
      "accountId": "0011e00000bWSxdAAG"
    },
    "mocks": {},
    "output": {
      "http_code": 400,
      "code": "INVALID_PARAMS",
      "param_errors": [
        "missing_text"
      ]
    }
  },
  {
    "description": "Should fail when the note text is not provided", 
    "input": {
      "body": {},
      "accountId": "0011e00000bWSxdAAG"
    },
    "mocks": {},
    "output": {
      "http_code": 400,
      "code": "INVALID_PARAMS",
      "param_errors": [
        "missing_text"
      ]
    }
  },
  {
    "description": "Should fail when the account id invalid", 
    "input": {
      "body": {
        "text": "Test note"
      },
      "accountId": "invalid"
    },
    "mocks": {
      "makeCompositeRequest": {
        "compositeResponse": [
          {
            "body": {
              "id": "0691e000001WvohAAC",
              "success": true,
              "errors": []
            },
            "httpHeaders": {
              "Location": "/services/data/v58.0/sobjects/ContentNote/0691e000001WvohAAC"
            },
            "httpStatusCode": 201,
            "referenceId": "CreateNote"
          },
          {
            "body": [
              {
                "message": "Linked Entity ID: id value of incorrect type: 0011e00000bWSxdAAkk",
                "errorCode": "MALFORMED_ID",
                "fields": [
                  "LinkedEntityId"
                ]
              }
            ],
            "httpHeaders": {},
            "httpStatusCode": 400,
            "referenceId": "AttachNote"
          }
        ]
      }
    },
    "output": {
      "http_code": 500,
      "code": "INTERNAL_SERVER_ERROR"
    }
  },
  {
    "description": "Should successfully create the note when note length is greater than 50 chars", 
    "input": {
      "body": {
        "text": "Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat."
      },
      "accountId": "0011e00000bWSxdAAG"
    },
    "mocks": {
      "makeCompositeRequest": {
        "compositeResponse": [
          {
            "body": {
              "id": "0691e000001WaSzAAK",
              "success": true,
              "errors": []
            },
            "httpHeaders": {
              "Location": "/services/data/v58.0/sobjects/ContentNote/0691e000001WaSzAAK"
            },
            "httpStatusCode": 500,
            "referenceId": "createNote"
          },
          {
            "body": {
              "id": "06A1e000002iD9mEAE",
              "success": true,
              "errors": []
            },
            "httpHeaders": {
              "Location": "/services/data/v58.0/sobjects/ContentDocumentLink/06A1e000002iD9mEAE"
            },
            "httpStatusCode": 201,
            "referenceId": "attachNote"
          }
        ]
      }
    },
    "output": {
      "http_code": 500,
      "code": "INTERNAL_SERVER_ERROR"
    }
  }
]